diff --git a/conn.php b/conn.php
index b6d000b..9ed25ce 100644
--- a/conn.php
+++ b/conn.php
@@ -23,7 +23,7 @@
 	set_error_handler("myErrorHandler");
 	
 	try{
-	$link_mysql = @mysql_pconnect("localhost","root","admin");
+	$link_mysql = @mysql_pconnect("localhost","root","");
 	mysql_query("SET NAMES 'utf8'");  
 	if(!$link_mysql)
 		throw new Exception("Can't connect the database server!");
diff --git a/js/adminmainFunction.js b/js/adminmainFunction.js
index 4f679ff..5cd9f9d 100644
--- a/js/adminmainFunction.js
+++ b/js/adminmainFunction.js
@@ -12,6 +12,7 @@ function checklogin()
 		{
 			$.ajax({
 				   url: "checklogin.php?time="+now(),
+				   async: false,
 				   error: function(){alert("ç½‘ç»œè¿æ¥é”™è¯¯");},
 				   success: function(Msg){
 					   //alert(Msg);
diff --git a/js/front.js b/js/front.js
index 79e9a13..2882e23 100644
--- a/js/front.js
+++ b/js/front.js
@@ -210,6 +210,8 @@ function submitComment()
 			}
 			//alert(aId);
 			//alert(content);
+			oldcontent = content;
+			content = encodeURI(content);
 			$.ajax({
 				   type: "POST",
 				   async: false,
@@ -225,7 +227,7 @@ function submitComment()
 							   //æ·»åŠ æ–°è¯„è®ºåˆ°å½“å‰é¡µ
 							   var newCommentStr = "<div class='comment'><div class='author'>\
 							   "+($.cookie("username")!=null?$.cookie("username"):"anonymity")+"</div><div class='postTime'>"+now()+"</div>\
-													<div class='commentcontent'>"+content+"</div><ul class='operations'>\
+													<div class='commentcontent'>"+oldcontent+"</div><ul class='operations'>\
 													<LI><A class='quote' onClick=\"alert('Please refresh this page!')\" href='#'>å›å¤</A></LI>\
 													<LI class=support><A onClick=\"alert('Please refresh this page!')\" href='#'>æ”¯æŒ</A>[<SPAN>0</SPAN>]</LI>\
 													<LI class=against><A onClick=\"alert('Please refresh this page!')\" href='#'>åå¯¹</A>[<SPAN>0</SPAN>]</LI>\
diff --git a/library/admin.comment.php b/library/admin.comment.php
index 2a72df3..f669585 100644
--- a/library/admin.comment.php
+++ b/library/admin.comment.php
@@ -13,7 +13,7 @@ function showchildcolumncomment ($columnid)
         $childid = explode("|", $childcolumn);
         foreach ($childid as $id) 
         {
-            echo "<a href='admin_comment.php?columnid=$id'>".getcolumnformationBycolumnid($id,"columnnamezh")."</a>ã€€";
+            echo "<a href='admin_comment.php?columnid=$id'>".getcolumnformationBycolumnid($id,"columnname")."</a>ã€€";
         }
     }
     else 
@@ -49,9 +49,9 @@ function showcomment($columnid, $currentpage, $pagesize=10)
 		echo "<td align='center'>".$row["username"]."</td>\n";
 		echo "<td align='center'>";
 		if($row["ifpass"]==="0")
-			echo gettext_r("havePass");
-		else 
 			echo gettext_r("notPass");
+		else 
+			echo gettext_r("havePass");
 		echo "</td>\n";
 		echo "<td align='center' width='100'><a href=\"javascript:if(confirm('".gettext_r("ifDelete")."'))jump('admin_comment.php','delete',".$row["id"].")\">".gettext_r("delete")."</a></td>\n";
 		echo "</tr>";
diff --git a/library/basefunction.php b/library/basefunction.php
index aa7abce..c6f0031 100644
--- a/library/basefunction.php
+++ b/library/basefunction.php
@@ -222,6 +222,7 @@ function readcache()
 {
 	//å¦‚æœå¤„åœ¨debugæ¨¡å¼ï¼Œåˆ™ä¸è¯»ç¼“å­˜
 	global $_DEBUG;
+	global $language;
 	if($_DEBUG==true)
 		return;
 		
@@ -238,6 +239,7 @@ function readcache()
 //åˆ›å»ºç¼“å­˜
 function buildcache($content)
 {
+	global $language;
 	$specialletters = array(":", "/", "&", "?", ".");
 	$cachefilepath = getroot()."/temp/".str_replace($specialletters, "", $_SERVER['REQUEST_URI']).".cache";
 	if(!file_exists(getroot()."/temp/"))
diff --git a/postcomment.php b/postcomment.php
index 68b225f..98f7b4a 100644
--- a/postcomment.php
+++ b/postcomment.php
@@ -6,9 +6,11 @@
     //Èç¹ûÊÇ»Ø¸´
     $quoteid = $_POST["quoteid"];//$quoteidÎªÒª»Ø¸´µÄcommentµÄid
     
-    $commentcontent = $_POST["commentcontent"];
-    
-	$commentcontent = htmlentities($commentcontent); 
+    $commentcontent = urldecode($_POST["commentcontent"]);
+	//$commentcontent =  urldecode($commentcontent);
+    //echo $commentcontent;
+	$commentcontent = htmlentities($commentcontent,ENT_QUOTES,"UTF-8"); 
+	//echo $commentcontent;
     //ÓÃ»§ĞÅÏ¢
     $username = getUserInfo("username");
     if($username=="notdefined")
